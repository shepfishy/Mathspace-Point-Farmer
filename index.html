<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathspace Automation Script</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f4f4f4;
        }
        header {
            background-color: #4a6fa5; /* A slightly more modern blue */
            color: white;
            text-align: center;
            padding: 1.5rem 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        header h1 {
            margin: 0;
            font-size: 2.2em;
        }
        header p {
            margin: 0.5em 0 0;
            font-size: 1.1em;
        }
        .container {
            width: 85%;
            max-width: 960px;
            margin: 20px auto;
            padding: 25px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        .section {
            margin-bottom: 30px;
        }
        .section h2 {
            color: #4a6fa5;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-top: 0;
        }
        ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        li {
            margin-bottom: 8px;
        }
        code {
            background-color: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        }
        .important {
            color: #d9534f;
            font-weight: bold;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Mathspace Automation Script</h1>
        <p>Automating Mathspace tasks with Selenium</p>
    </header>
    
    <div class="container">
        <section class="section">
            <h2>Overview</h2>
            <p>This project utilizes a Python script leveraging the Selenium library to automate interactions with the Mathspace website. The primary goal is to log in, navigate to problem pages, extract question content, attempt to solve simple arithmetic problems (like 0 and 1 times tables), and automatically submit the answers. This can be used, for example, to "farm points" or automate repetitive tasks.</p>
        </section>

        <section class="section">
            <h2>How It Works</h2>
            <p>The script performs the following key actions:</p>
            <ul>
                <li><strong>Browser Initialization:</strong> It starts a Chrome browser instance using Selenium WebDriver. It attempts to use a local ChromeDriver executable or falls back to `webdriver-manager` to download the appropriate driver.</li>
                <li><strong>Login:</strong> Automatically logs into Mathspace using credentials defined in the script.</li>
                <li><strong>Problem Navigation:</strong> Monitors the browser's URL to detect when the user is on a "problem" page (identified by <code>state=problem</code> in the URL).</li>
                <li><strong>Question Extraction:</strong>
                    <ul>
                        <li>Identifies and extracts text from main problem headers and subproblem sections.</li>
                        <li>Employs specific logic to handle mathematical expressions rendered with MathQuill (looking for <code>mathquill-command-id</code> attributes).</li>
                        <li>Can search within iframes if questions are not found in the main document.</li>
                        <li>Includes fallback methods if standard structures aren't detected.</li>
                    </ul>
                </li>
                <li><strong>Text Cleaning:</strong> Processes the extracted text using regular expressions to remove irrelevant information, UI elements, promotional text, and normalize formatting.</li>
                <li><strong>Calculation:</strong> Attempts to evaluate simple mathematical expressions (e.g., <code>2 * 0</code>, <code>7 / 1</code>) from the cleaned question text.</li>
                <li><strong>Answer Input:</strong> If a calculation is successful, the script tries to locate the answer input field on the page and types in the calculated result.</li>
                <li><strong>Progression:</strong> Looks for and clicks "Continue Practicing" buttons to move to new sets of problems.</li>
                <li><strong>Logging:</strong> Provides detailed console output about its operations, errors, and extracted content.</li>
            </ul>
        </section>

        <section class="section">
            <h2>Key Features</h2>
            <ul>
                <li>Automated login to Mathspace.</li>
                <li>Dynamic detection and processing of problem pages.</li>
                <li>Advanced question extraction, including MathQuill support and iframe handling.</li>
                <li>Robust text cleaning to isolate mathematical problems.</li>
                <li>Basic arithmetic calculation (currently focused on simple operations).</li>
                <li>Automated input of calculated answers.</li>
                <li>Handles common navigation elements like "Continue Practicing".</li>
                <li>Fallback mechanisms for WebDriver setup and question extraction.</li>
            </ul>
        </section>

        <section class="section">
            <h2>Requirements & Setup</h2>
            <ul>
                <li><strong>Python 3.x:</strong> Ensure Python is installed on your system.</li>
                <li><strong>Libraries:</strong> Install necessary Python packages by running:
                    <br><code>pip install selenium webdriver-manager</code>
                </li>
                <li><strong>Google Chrome:</strong> The script is designed for Google Chrome.</li>
                <li><strong>ChromeDriver:</strong>
                    <ul>
                        <li>The script attempts to use a hardcoded path for <code>chromedriver.exe</code>. You <span class="important">MUST</span> update this path in <code>app.py</code> if you want to use a specific local version:
                            <br><code>chromedriver_path = r"YOUR_PATH_TO_CHROMEDRIVER.EXE"</code>
                        </li>
                        <li>If the specified path is invalid or fails, it will attempt to use <code>webdriver-manager</code> to automatically download and manage the correct ChromeDriver.</li>
                    </ul>
                </li>
                <li><strong>Credentials:</strong> Update the default username and password in <code>app.py</code>:
                    <br><code>DEFAULT_CREDENTIALS = {"username": "YOUR_USERNAME", "password": "YOUR_PASSWORD"}</code>
                </li>
            </ul>
        </section>

        <section class="section">
            <h2>How to Run</h2>
            <ol>
                <li>Ensure all requirements and setup steps are completed.</li>
                <li>Open a terminal or command prompt.</li>
                <li>Navigate to the directory where <code>app.py</code> is located.</li>
                <li>Run the script using: <code>python app.py</code></li>
                <li>A Chrome browser window will open and the script will begin its operations. Monitor the console for logs.</li>
                <li>Press <code>Ctrl+C</code> in the terminal to stop the script.</li>
            </ol>
        </section>

        <section class="section">
            <h2>Limitations & Disclaimer</h2>
            <ul>
                <li><strong>Calculation Scope:</strong> The current <code>calculate_expression</code> function is designed for very simple arithmetic. It may not handle complex algebra, fractions, or other advanced mathematical notation.</li>
                <li><strong>Website Changes:</strong> Web scraping scripts are sensitive to changes in website structure (HTML, CSS selectors). If Mathspace updates its website, the script may break and require updates to its selectors and logic.</li>
                <li><strong>Ethical Use:</strong> This script is provided for educational and experimental purposes. Be mindful of the terms of service of any website you automate and use such tools responsibly. Automating tasks to gain an unfair advantage may be against platform policies.</li>
                <li><strong>Error Handling:</strong> While some error handling is in place, complex web environments can lead to unexpected issues.</li>
            </ul>
        </section>
    </div>
</body>
</html>